// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id    Int   @id @default(autoincrement())
  authorId String @default(uuid()) @unique
  name  String
  role  Role  @default(RECRUITER)
  login String @unique
  password String 
  vacancies Vacancy[]
}

model Vacancy {
  id  Int @id @default(autoincrement())
  vacancyId String  @default(uuid()) @unique
  vacancyStatus VacancyStatus @default(OPEN)
  department String
  title String @unique
  experience String
  salary String
  requirements String
  conditions String
  job_duties String
  author User @relation(fields: [authorId], references: [authorId]) @ignore
  authorId String
  responders Applicant[]
}

model Applicant {
  id Int @id @default(autoincrement())
  vacancy Vacancy @relation(fields: [appliedVacancyId], references: [vacancyId]) @ignore
  applicantId String @default(uuid()) @ unique
  appliedVacancyId String @unique
  name String
  experience String
  education String
  wanted_salary String
  city String
  status ApplicantStatus @default(NEW)
  photo_url String
  resume_url String
  social_media_links String[]
}

enum Role {
  RECRUITER 
  ADMIN
}

enum VacancyStatus {
  OPEN
  PAUSED
  STOPPED
}

enum ApplicantStatus {
  NEW
  TEST_TASK
  PHONE_INTERVIEW
  TECH_INTERVIEW
  OFFER
  ONBOARDING
  APPLICANT_DECLINE
  RECRUITER_DECLINE
  DELETED
}
